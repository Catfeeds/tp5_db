<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>layui分页</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    {load file="__STATIC__/layui/layui.all.js"}
    {load file="__STATIC__/layui/css/layui.css"}
    {load file="__STATIC__/js/jquery-3.2.1.min.js"}
</head>
<body>
<table class="layui-hide" id="test"></table>
<!--<table class="layui-table" lay-data="{height:315, url:'/demo/table/user/', page:true, id:'test'}" lay-filter="test">-->
    <!--<thead>-->
    <!--<tr>-->
        <!--<th lay-data="{field:'id', width:80, sort: true}">ID</th>-->
        <!--<th lay-data="{field:'username', width:80}">用户名</th>-->
        <!--<th lay-data="{field:'sex', width:80, sort: true}">性别</th>-->
        <!--<th lay-data="{field:'city'}">城市</th>-->
        <!--<th lay-data="{field:'sign'}">签名</th>-->
        <!--<th lay-data="{field:'experience', sort: true}">积分</th>-->
        <!--<th lay-data="{field:'score', sort: true}">评分</th>-->
        <!--<th lay-data="{field:'classify'}">职业</th>-->
        <!--<th lay-data="{field:'wealth', sort: true}">财富</th>-->
    <!--</tr>-->
    <!--</thead>-->
<!--</table>-->
<!--<div id="pages" class="text-center"></div>-->
<script>

    var table = layui.table;
    table.render({
        elem: '#test'
        ,url:"{url:('test/ajaxpage')}"
        ,page: { //支持传入 laypage 组件的所有参数（某些参数除外，如：jump/elem） - 详见文档
            layout: ['limit', 'count', 'prev', 'page', 'next', 'skip'] //自定义分页布局
            ,curr: 1 //设定初始在第 5 页
            ,groups: 5 //只显示 1 个连续页码
            ,first: true //不显示首页
            ,last: true //不显示尾页

        }
        ,cols: [[
            {field:'uid', width:80, title: 'ID', sort: true}
            ,{field:'username', width:100, title: '用户名'}
            ,{field:'sex', width:80, title: '性别', sort: true}
            ,{field:'password', width:80, title: '城市'}
            ,{field:'ppassword', title: '签名', minWidth: 150}
            ,{field:'groupid', width:80, title: '积分', sort: true}

        ]],
        done: function(res, curr, count){
            //如果是异步请求数据方式，res即为你接口返回的信息。
            //如果是直接赋值的方式，res即为：{data: [], count: 99} data为当前页数据、count为数据总长度
            console.log(res);

            //得到当前页码
            console.log(curr);

            //得到数据总量
            console.log(count);
        }

    });
//    var laypage = layui.laypage;
//    laypage.render({
//        elem: 'pages',
//        count: {count},
//        limit: {limit},
//        limits: [10, 15, 20],
//        layout: ['count', 'prev', 'page', 'next', 'limit', 'skip'],
//        curr: {page},
//        jump: function (obj, first) {
//            console.log(obj);
//            if (!first) {
//                window.location.href = "{url:('test/pageindex')}?page=" + obj.curr + '&limit=' + obj.limit;
//            }
//        }
//    });
</script>
</body>
</html>